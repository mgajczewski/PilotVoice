---
import Layout from "../../../layouts/Layout.astro";
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from "../../../components/ui/card";
import { Button } from "../../../components/ui/button";

export const prerender = false;

// Get the slug from the URL
const { slug } = Astro.params;

// Guard clause: validate slug
if (!slug) {
  return Astro.redirect("/404");
}
---

<Layout title="Thank You - Survey Completed" description="Thank you for completing the survey">
  <div class="container mx-auto px-4 py-8 md:py-12">
    <div class="max-w-2xl mx-auto">
      <Card>
        <CardHeader className="text-center">
          <div
            class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30"
          >
            <svg
              class="h-8 w-8 text-green-600 dark:text-green-400"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          <CardTitle className="text-2xl md:text-3xl"> Thank You! </CardTitle>
          <CardDescription className="text-base md:text-lg mt-2">
            Your survey has been submitted successfully
          </CardDescription>
        </CardHeader>

        <CardContent>
          <div class="space-y-6">
            <div class="text-center text-muted-foreground">
              <p class="leading-relaxed">
                We appreciate you taking the time to share your feedback. Your responses help us improve future
                competitions and ensure a better experience for all pilots.
              </p>
            </div>

            <div class="rounded-lg bg-muted/50 p-4 border border-border">
              <h3 class="font-semibold mb-2 text-foreground">ðŸ”’ Privacy Reminder</h3>
              <p class="text-sm text-muted-foreground leading-relaxed">
                Your responses remain <strong class="text-foreground">completely anonymous</strong>. Any identifying
                information in your feedback has been automatically anonymized to protect your privacy.
              </p>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
              <Button asChild variant="default" size="lg">
                <a href="/">Back to Home</a>
              </Button>
              <Button asChild variant="outline" size="lg">
                <a href={`/surveys/${slug}`}>View Survey Details</a>
              </Button>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  </div>
</Layout>
