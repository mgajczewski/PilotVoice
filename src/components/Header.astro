---
import { buttonVariants } from "./ui/button";

const { user } = Astro.locals;
---

<header class="border-b border-border bg-background">
  <nav class="container mx-auto flex items-center justify-between px-4 py-4 md:px-6 md:py-5">
    <!-- Logo -->
    <a
      href="/"
      class="text-xl font-bold text-foreground hover:text-primary transition-colors md:text-2xl"
      aria-label="PilotVoice - Home"
    >
      PilotVoice
    </a>

    <!-- Navigation Buttons -->
    <div class="flex items-center gap-2 md:gap-4">
      {
        user ? (
          <>
            {/* Authenticated Navigation */}
            <span class="text-sm text-muted-foreground hidden md:inline">{user.email}</span>
            <a href="/profile" class={buttonVariants({ variant: "ghost" })}>
              My Profile
            </a>
            <form action="/api/auth/logout" method="POST" class="inline">
              <button type="submit" class={buttonVariants({ variant: "outline" })}>
                Sign Out
              </button>
            </form>
          </>
        ) : (
          <>
            {/* Unauthenticated Navigation */}
            <a href="/login" class={buttonVariants({ variant: "ghost" })} data-testid="header-login">
              Sign In
            </a>
            <a href="/register" class={buttonVariants()} data-testid="header-register">
              Sign Up
            </a>
          </>
        )
      }
    </div>
  </nav>
</header>
